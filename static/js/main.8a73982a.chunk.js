(this["webpackJsonpeos-issue-request"]=this["webpackJsonpeos-issue-request"]||[]).push([[0],{100:function(e){e.exports=JSON.parse('{"authentication":{"title-sign-in":"Sign in","title-sign-up":"Sign up","login-label":"Login","register-label":"Register","submit-label":"Submit","header-left":"User Story","user-stories-description":"Share with us how you use our products, relate to other users\' stories, vote them up, and we\'ll make sure we deliver cohesive solutions that enhance your experience.","footer-left":"This site saves some information in cookies but only when strictly necessary","username-label":"Enter your username","email-label":"Enter your email","password-label":"Enter your password","confirm-password-label":"Confirm password","forgot-password":"Forgot password?","reset-password":"Set your new password","old-password":"Enter your old password","new-password":"New password","confirm-password":"Confirm password","create-account":"Create an account","footer-right":"2020 EOS","existing-user":"Existing user?","reset-password-done":"Take me to the sign-in page","success":"Success"}}')},104:function(e,t,a){e.exports=a(231)},115:function(e,t,a){},136:function(e,t,a){e.exports=a.p+"static/media/loading.641bf49c.svg"},137:function(e,t,a){e.exports=a.p+"static/media/user-story-graphic.b152d872.svg"},231:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(88),s=a.n(c),o=a(102),l=a(2),i=a(7),u=(a(114),a(115),a(9)),m=a(1),d=a.n(m),p=a(3),f=a(4),E=a.n(f),b=a(5),v=a(8),h=a(10),g=function(e){var t=e.children,a=e.className,n=e.action,c=e.type,s=e.onClick,o=e.disabled;return r.a.createElement("button",{className:a,action:n,type:c,onClick:s,disabled:o},t)},w=function(e){var t=e.isActive,a=e.children,n=e.cancelText,c=e.okText,s=e.onCancel,o=e.onOk,l=e.showButtons,i=e.active;return r.a.createElement(r.a.Fragment,null," ",t?r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-card"},r.a.createElement("div",{className:"flex flex-row modal-content"},a),l&&r.a.createElement("div",{className:"flex flex-row flex-space-around"},r.a.createElement(g,{className:"btn btn-default",onClick:s},n||"Cancel"),r.a.createElement(g,{className:"btn btn-default",onClick:o},c||"Accept")))):"",i?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-card-vote"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("span",{className:"close-icon",onClick:e.handleClose},"\xd7"),e.content)))):"")},y=function(e){var t=e.story,a=localStorage.getItem("id"),c=t.followers.map((function(e){return JSON.stringify(e.id)})),s=Object(n.useState)(c),o=Object(l.a)(s,2),u=o[0],m=o[1],f=Object(n.useState)(t.followers.length),v=Object(l.a)(f,2),h=v[0],g=v[1],y=Object(n.useState)(!1),O=Object(l.a)(y,2),N=O[0],j=O[1],k=Object(n.useState)(!1),x=Object(l.a)(k,2),C=x[0],S=x[1],A=Object(n.useState)(!1),P=Object(l.a)(A,2),q=P[0],T=P[1],U=function(){T(!q)};Object(n.useEffect)((function(){t.followers.map((function(e){return e.id})).includes(a)&&S(!0)}),[t.followers,a]);var R=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,r,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j(!0),!C){e.next=12;break}return n=u.filter((function(e){return e!==JSON.stringify(a)})),e.next=5,E.a.post("".concat(b.a,"/graphql"),{query:'\n        mutation {\n          updateUserStory(input: {where: {id: "'.concat(t.id,'"} data: {followers: [').concat(n,"]}}){\n            userStory{\n              followers {\n                id\n              }\n            }\n          }\n        }\n        ")},{withCredentials:!0});case 5:r=e.sent,n=r.data.data.updateUserStory.userStory.followers.map((function(e){return JSON.stringify(e.id)})),m(n),S(!1),g((function(e){return e-1})),e.next=19;break;case 12:return e.next=14,E.a.post("".concat(b.a,"/graphql"),{query:'\n        mutation {\n          updateUserStory(input: {where: {id: "'.concat(t.id,'"} data: {followers: [').concat(u,', "').concat(a,'"]}}){\n            userStory{\n              followers {\n                id\n              }\n            }\n          }\n        }\n        ')},{withCredentials:!0});case 14:c=e.sent,s=c.data.data.updateUserStory.userStory.followers.map((function(e){return JSON.stringify(e.id)})),m(s),S(!0),g((function(e){return e+1}));case 19:j(!1);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"flex flex-column vote-wrapper ".concat(a&&C?"vote-wrapper-voted":"")},r.a.createElement("div",{className:"votes-count",onClick:U},h),r.a.createElement("div",{className:"vote-button ".concat(a?"vote-button-clickable":""),onClick:function(){a&&!N&&R(t)}},r.a.createElement("i",{className:"eos-icons"},"thumb_up"),"Vote"),q&&r.a.createElement(w,{content:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,0===t.followers.length?r.a.createElement("h1",null,"No Voters For This Story"):r.a.createElement("h1",null,"Voters For This Story")),t.followers.map((function(e){return r.a.createElement("div",{className:"flex flex-row author-information"},r.a.createElement("div",{className:"user-avatar avatar-vote"},r.a.createElement("img",{className:"avatar",src:"https://avatars.dicebear.com/api/jdenticon/".concat(e.username,".svg"),alt:"Default User Avatar"})),r.a.createElement("div",null,r.a.createElement(i.a,{className:"link-vote link link-default",to:"/profile/".concat(e.id)},e.username)))}))),handleClose:U,active:q}))},O=function(e){var t=e.stories,a=e.state,n=e.product;return r.a.createElement("div",{className:"flex flex-column"},t&&t.length?t.map((function(e,t){var c,s,o,l,u;return(null===(c=e.user_story_status)||void 0===c?void 0:c.Status)!==a||e.product.Name!==n&&"All"!==n?"":r.a.createElement("div",{className:"story",key:t},r.a.createElement(y,{story:e}),r.a.createElement("div",{className:"stories-content",onClick:function(){Object(i.c)("/story/".concat(e.id))}},r.a.createElement("h3",null,e.Title),r.a.createElement("p",null,((u=(u=e.Description).replace(/<\s*[^>]*>/gi,"")).length>80&&(u="".concat(u.substring(0,80),"...")),u))),r.a.createElement("div",{className:"story-author story-subcontent"},r.a.createElement("div",{className:"user-avatar"},r.a.createElement("img",{className:"avatar",src:null!==(s=null===e||void 0===e||null===(o=e.author)||void 0===o||null===(l=o.profilePicture)||void 0===l?void 0:l.url)&&void 0!==s?s:"https://avatars.dicebear.com/api/jdenticon/".concat(e.author.username,".svg"),alt:"Default User Avatar"})),r.a.createElement("div",{className:"flex flex-column"},r.a.createElement("small",null,"Created by"),r.a.createElement(i.a,{className:"link link-default",to:"/profile/".concat(e.author.id)},e.author.username))),r.a.createElement("div",{className:"flex flex-column story-subcontent"},r.a.createElement("small",null,"Category"),r.a.createElement("span",{className:"category-text"},e.Category)),r.a.createElement("div",{className:"flex flex-column"},r.a.createElement("span",{className:"story-meta"},r.a.createElement("i",{className:"eos-icons"},"attachment"),e.user_story_comments.length),r.a.createElement("span",{className:"story-meta"},r.a.createElement("i",{className:"eos-icons"},"comment"),e.user_story_comments.length)))})):r.a.createElement("h3",null,"No stories"))},N=function(){return r.a.createElement("div",{className:"loading-indicator"},r.a.createElement("img",{className:"loader-image",src:a(136),alt:"loader"}))},j=a(92),k=a.n(j),x=Object(n.createContext)(),C=function(){var e=Object(n.useContext)(x).dispatch;return{registerUser:function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.post("".concat(b.a,"/auth/local/register"),a,{withCredentials:!0}).catch((function(t){"Network Error"===t.message?e({type:"ERROR",payload:t.message}):e({type:"ERROR",payload:t.response.data.message[0].messages[0].message})}));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),login:function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.post("".concat(b.a,"/auth/local"),a,{withCredentials:!0}).catch((function(t){"Network Error"===t.message?e({type:"ERROR",payload:t.message}):e({type:"ERROR",payload:t.response.data.message[0].messages[0].message})}));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),logout:function(){var t=Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.post("".concat(b.a,"/logout"),{},{withCredentials:!0}).catch((function(t){"Network Error"===t.message?e({type:"ERROR",payload:t.message}):e({type:"ERROR",payload:t.response.data.message[0].messages[0].message})}));case 2:localStorage.clear();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),forgotPassword:function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.post("".concat(b.a,"/auth/forgot-password"),a).catch((function(t){"Network Error"===t.message?e({type:"ERROR",payload:t.message}):e({type:"ERROR",payload:t.response.data.message[0].messages[0].message})}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),resetPassword:function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.post("".concat(b.a,"/auth/reset-password"),a).catch((function(t){"Network Error"===t.message?e({type:"ERROR",payload:t.message}):e({type:"ERROR",payload:t.response.data.message[0].messages[0].message})}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),changePassword:function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.password===a.passwordConfirmation){t.next=3;break}return e({type:"ERROR",payload:"The new password and confirm passwords do not match."}),t.abrupt("return",null);case 3:return t.next=5,E.a.post("".concat(b.a,"/auth/change-password"),a,{withCredentials:!0}).catch((function(t){var a,n,r,c,s;"Network Error"===t.message?e({type:"ERROR",payload:t.message}):e({type:"ERROR",payload:null===(a=t.response.data)||void 0===a||null===(n=a.message)||void 0===n||null===(r=n[0])||void 0===r||null===(c=r.messages)||void 0===c||null===(s=c[0])||void 0===s?void 0:s.message})}));case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},S=function(){var e=localStorage.getItem("id"),t=Object(n.useContext)(x).state,a=Object(n.useState)([]),c=Object(l.a)(a,2),s=c[0],o=c[1],u=Object(n.useState)(!1),m=Object(l.a)(u,2),f=m[0],v=m[1],h=Object(n.useState)(0),g=Object(l.a)(h,2),w=g[0],y=g[1],O=Object(n.useState)(!1),N=Object(l.a)(O,2),j=N[0],k=N[1],C=Object(n.useRef)();Object(n.useEffect)((function(){var e=function(e){C.current&&!C.current.contains(e.target)&&v(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[C]),Object(n.useEffect)((function(){e&&function(){var t=Object(p.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'query {\n              userStoryNotifications (where: {\n                users: {\n                  id: "'.concat(e,'"\n                }\n              }){\n                message\n                id\n                users {\n                  id\n                }\n                seenBy {\n                  id\n                }\n                date\n                link\n              }\n            }')},{withCredentials:!0});case 2:a=t.sent,n=[],a.data.data.userStoryNotifications&&(n=(n=a.data.data.userStoryNotifications).filter((function(t){return!t.seenBy.map((function(e){return e.id})).includes(e)}))),o(n),y(n.length);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[e,j]);return t.auth&&r.a.createElement("div",{className:"dropdown-container",onClick:function(){v(!f),k(!0)},ref:C},r.a.createElement("i",{className:"eos-icons ".concat(f?"eos-icons-open":"")},"notifications"),r.a.createElement("span",{className:"notifications-count"}," ",!j&&w>0?w:""),r.a.createElement("div",{className:"dropdown notifications-dropdown ".concat(f?"dropdown-open dropdown-left":"dropdown-close dropdown-left")},r.a.createElement("ul",{className:"dropdown-list"},s?s.map((function(e,t){return r.a.createElement("li",{className:"dropdown-element",onClick:function(){return Object(i.c)("/".concat(e.link))},key:t},e.message,r.a.createElement("hr",{className:"dropdown-separator"}))})):""),r.a.createElement("div",{className:"flex flex-row flex-space-between notifications-options"},s&&s.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{className:"link link-default",to:"#",onClick:function(){s&&s.forEach(function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=a.seenBy.map((function(e){return e.id}))).includes(e)){t.next=8;break}return n.push(e),t.next=5,E.a.post("".concat(b.a,"/graphql"),{query:'mutation updateNotifications($seenBy: [ID]){\n                updateUserStoryNotification(input: {\n                  where: {\n                    id: "'.concat(a.id,'"\n                  }\n                  data: {\n                    seenBy: $seenBy\n                  }\n                }) {\n                  userStoryNotification {\n                    id\n                  }\n                }\n              }'),variables:{seenBy:n}},{withCredentials:!0});case 5:o([]),y(0),k(!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},"Mark all as read")):"No new notifications at the moment",r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{className:"link link-default",to:"/notifications"},"View all")))))},A=function(e){var t=C().logout,a=localStorage.getItem("username"),c=localStorage.getItem("email"),s=Object(n.useContext)(x),o=s.state,u=s.dispatch,m=Object(n.useState)(!1),f=Object(l.a)(m,2),E=f[0],b=f[1],v=Object(n.useRef)();Object(n.useEffect)((function(){var e=function(e){v.current&&!v.current.contains(e.target)&&b(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[v]);var h=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:u({type:"DEAUTHENTICATE"}),Object(i.c)("/");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("header",{className:"nav-header"},r.a.createElement(i.a,{className:"link",to:"/"},r.a.createElement("img",{className:"logo",src:k.a,alt:""})),r.a.createElement("nav",{className:"navbar-content"},o.auth&&r.a.createElement(i.a,{className:"btn btn-default",to:"/newStory"},"+ New Story"),!o.auth&&r.a.createElement(i.a,{className:"btn btn-default",to:"/login"},"Sign In"),r.a.createElement(S,null),o.auth&&r.a.createElement("div",{className:"dropdown-container",onClick:function(){b(!E)},ref:v},r.a.createElement("i",{className:"eos-icons ".concat(E?"eos-icons-open":"")},"account_circle"),r.a.createElement("div",{className:"dropdown nav-dropdown ".concat(E?"dropdown-open dropdown-left":"dropdown-close dropdown-left")},r.a.createElement("ul",{className:"dropdown-list"},r.a.createElement("li",{className:"user-dropdown user-dropdown-name"},a),r.a.createElement("li",{className:"user-dropdown user-dropdown-email"},c),r.a.createElement("hr",{className:"dropdown-separator"}),r.a.createElement("li",{className:"dropdown-element",onClick:function(){return Object(i.c)("/myStories")}},r.a.createElement("i",{className:"eos-icons eos-18"},"message"),"My Stories"),r.a.createElement("li",{className:"dropdown-element",onClick:function(){return Object(i.c)("/myProfile")}},r.a.createElement("i",{className:"eos-icons eos-18"},"settings"),"My Account"),r.a.createElement("hr",{className:"dropdown-separator"}),r.a.createElement("li",{className:"dropdown-element",onClick:h},r.a.createElement("i",{className:"eos-icons eos-18"},"exit_to_app"),"Log Out"))))))},P=function(e){var t=e.getPage,a=e.storyCount,c=e.status,s=e.product,o=Object(n.useState)(1),m=Object(l.a)(o,2),d=m[0],p=m[1],f=Object(n.useState)(),E=Object(l.a)(f,2),b=E[0],v=E[1];return Object(n.useEffect)((function(){p(1),t(1)}),[c,s,t]),Object(n.useEffect)((function(){if(a)if(a>=5){var e=Math.ceil(a/5);v(Object(u.a)(Array(e+1).keys()).slice(1))}else v([1])}),[a]),r.a.createElement("div",{className:"pagination"},r.a.createElement(i.a,{className:"btn btn-pagination",onClick:function(){b.find((function(e){return e===d-1}))&&(p((function(e){return e-1})),t(d-1))},to:"/"},r.a.createElement("i",{className:"eos-icons eos-18"},"keyboard_arrow_left"),"Prev"),r.a.createElement("div",{className:"btn-pagination"},b?b.map((function(e,a){return r.a.createElement(i.a,{className:"number ".concat(d===e?"selected":""),onClick:function(){p(e),t(e)},to:"/",key:a},e)})):""),r.a.createElement(i.a,{className:"btn btn-pagination",onClick:function(){b.find((function(e){return e===d+1}))&&(p((function(e){return e+1})),t(d+1))},to:"/"},"Next",r.a.createElement("i",{className:"eos-icons eos-18"},"keyboard_arrow_right")))},q=function(e){var t=e.title,a=e.reference,c=e.curr,s=e.setCurr,o=e.itemList,i=Object(n.useState)(!1),u=Object(l.a)(i,2),m=u[0],d=u[1];return Object(n.useEffect)((function(){var e=function(e){a.current&&!a.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"filter-title"},t),r.a.createElement("div",{className:"dropdown-container",ref:a},r.a.createElement(g,{type:"button",className:"btn btn-transparent",onClick:function(){d(!m)}},m?r.a.createElement("i",{className:"eos-icons"},"keyboard_arrow_up"):r.a.createElement("i",{className:"eos-icons"},"keyboard_arrow_down"),"\xa0 ",c),r.a.createElement("div",{className:"dropdown ".concat(m?"dropdown-open dropdown-right":"dropdown-close dropdown-right")},r.a.createElement("ul",{className:"dropdown-list"},o.map((function(e,t){return r.a.createElement("li",{key:t,className:"dropdown-element",onClick:function(){return s(e),void d(!1)}},e)}))))))},T=function(e){var t=e.isOpen,a=e.userTerm,c=e.setUserTerm,s=e.setUserQuery,o=e.setUsersSuggestionOpen,i=Object(n.useState)([]),u=Object(l.a)(i,2),m=u[0],f=u[1],h=Object(v.usePromiseTracker)({area:"user-suggest-dropdown"}).promiseInProgress,g=Object(n.useRef)(null),w=Object(n.useRef)();return Object(n.useEffect)((function(){var e=function(e){g.current&&!g.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[o]),Object(n.useEffect)((function(){if(a.length<=0)o(!1);else{"undefined"!==typeof w.current&&w.current.cancel(),w.current=E.a.CancelToken.source();var e=function(){var e=Object(p.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'query {\n            users (where: {\n              username_contains: "'.concat(a,'"\n            }) {\n              id\n              username\n              profilePicture {\n                url\n              }\n            }\n          }')},{cancelToken:w.current.token});case 2:r=e.sent,f(null!==(t=null===(n=r.data.data)||void 0===n?void 0:n.users)&&void 0!==t?t:[]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a.length>0?Object(v.trackPromise)(e(),"user-suggest-dropdown"):f([])}}),[a,o]),t?r.a.createElement("div",{ref:g,className:"flex flex-center dropdown user-suggest-dropdown"},h?r.a.createElement(N,null):m.length>0?r.a.createElement("ul",{className:"dropdown-list"},m.map((function(e){var t,a;return r.a.createElement("li",{key:e.id,onClick:function(){c(e.username),s(e.username),o(!1)},className:"user-data"},r.a.createElement("div",{className:"user-row flex flex-space-between flex-align-center"},r.a.createElement("img",{className:"avatar",src:null!==(t=null===e||void 0===e||null===(a=e.profilePicture)||void 0===a?void 0:a.url)&&void 0!==t?t:"https://avatars.dicebear.com/api/jdenticon/".concat(e.username,".svg"),alt:"Default User Avatar"}),r.a.createElement("span",null,e.username)))}))):r.a.createElement("p",null,"No users found")):null},U={stateList:[{icon:"watch_later",status:"Under consideration"},{icon:"check_circle",status:"Planned"},{icon:"create",status:"Designing"},{icon:"code",status:"Implementing"},{icon:"patch_fixes",status:"Testing"},{icon:"deploy",status:"Deployed"}],sortByList:["Most Voted","Most Discussed"]},R=function(){var e=C().logout,t=localStorage.getItem("id"),c=Object(n.useContext)(x).dispatch,s=Object(n.useState)(1),o=Object(l.a)(s,2),m=o[0],f=o[1],y=Object(n.useState)(),j=Object(l.a)(y,2),k=j[0],S=j[1],R=Object(n.useState)(!1),I=Object(l.a)(R,2),L=I[0],_=I[1],B=Object(n.useState)(),F=Object(l.a)(B,2),D=F[0],V=F[1],M=Object(n.useState)("Under consideration"),H=Object(l.a)(M,2),Y=H[0],K=H[1],z=Object(n.useState)([]),W=Object(l.a)(z,2),G=W[0],X=W[1],Q=Object(n.useRef)(),J=Object(n.useRef)(),Z=Object(n.useRef)(),$=Object(n.useState)("All"),ee=Object(l.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)("Most Voted"),re=Object(l.a)(ne,2),ce=re[0],se=re[1],oe=Object(n.useState)("All"),le=Object(l.a)(oe,2),ie=le[0],ue=le[1],me=Object(n.useState)([]),de=Object(l.a)(me,2),pe=de[0],fe=de[1],Ee=Object(n.useState)([]),be=Object(l.a)(Ee,2),ve=be[0],he=be[1],ge=Object(n.useState)(""),we=Object(l.a)(ge,2),ye=we[0],Oe=we[1],Ne=Object(v.usePromiseTracker)().promiseInProgress,je=Object(n.useState)(""),ke=Object(l.a)(je,2),xe=ke[0],Ce=ke[1],Se=Object(n.useState)(""),Ae=Object(l.a)(Se,2),Pe=Ae[0],qe=Ae[1],Te=Object(n.useState)(""),Ue=Object(l.a)(Te,2),Re=Ue[0],Ie=Ue[1],Le=Object(n.useRef)(),_e=Object(n.useState)("Title"),Be=Object(l.a)(_e,2),Fe=Be[0],De=Be[1],Ve=Object(n.useState)(!1),Me=Object(l.a)(Ve,2),He=Me[0],Ye=Me[1],Ke=Object(n.useState)(""),ze=Object(l.a)(Ke,2),We=ze[0],Ge=ze[1],Xe=Object(n.useState)(""),Qe=Object(l.a)(Xe,2),Je=Qe[0],Ze=Qe[1],$e=Object(n.useCallback)((function(e){f(e)}),[]);Object(n.useEffect)((function(){Ce("All"!==te?'product : {Name: "'.concat(te,'"}'):""),qe("All"!==ie?'Category : "'.concat(ie,'"'):""),""===ye&&Ie(""),""===We&&Ze("")}),[te,ie,ye,We]),Object(n.useEffect)((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'query {\n            userStories(sort: "createdAt:desc", limit: 5, start: '.concat(5*(m-1),', where: {\n                user_story_status : {\n                  Status: "').concat(Y,'"\n                },\n                author: {\n                  username_contains: "').concat(Je,'"\n                }\n                ').concat(Pe,"\n                ").concat(xe,"\n                ").concat(Re,"\n            }) {\n              id\n              Title\n              Description\n              user_story_status {\n                Status\n              }\n              user_story_comments {\n                Comments\n              }\n              product {\n                Name\n              }\n              author {\n                id\n                username\n                profilePicture {\n                  id\n                  url\n                }\n              }\n              followers {\n                id\n                username\n              }\n              Category\n            }\n          }\n          ")},{withCredentials:!0});case 2:t=e.sent,X(t.data.data.userStories);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(v.trackPromise)(e())}),[Pe,Y,m,xe,Re,Je]),Object(n.useEffect)((function(){(function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'\n          query {\n            userStoriesConnection(where: {\n              user_story_status: {\n                Status: "'.concat(Y,'"\n              },\n              author: {\n                username_contains: "').concat(Je,'"\n              }\n              ').concat(xe,",\n              ").concat(Re,"\n            }) {\n              aggregate {\n                count\n              }\n            }\n          }")},{withCredentials:!0});case 2:t=e.sent,S(t.data.data.userStoriesConnection.aggregate.count);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[Y,te,xe,Re,Je]),Object(n.useEffect)((function(){(function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:"query {\n            products {\n              Name\n            }\n          }"},{withCredentials:!0});case 2:return a=e.sent,e.abrupt("return",null!==a.data.data.product?fe(["All"].concat(Object(u.a)(null===(t=a.data.data.products)||void 0===t?void 0:t.map((function(e){return e.Name}))))):fe(["All"]));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){(function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'{ __type(name: "ENUM_USERSTORY_CATEGORY") {enumValues {name}}}'});case 2:t=e.sent,he(["All"].concat(Object(u.a)(t.data.data.__type.enumValues.map((function(e){return e.name})))));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){var e=function(e,t){return e.followers.length>t.followers.length?-1:1},t=function(e,t){return e.user_story_comments.length>t.user_story_comments.length?-1:1},a=function(){var a=Object(p.a)(d.a.mark((function a(){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:"Most Voted"===ce&&X(G.sort(e)),"Most Discussed"===ce&&X(G.sort(t));case 2:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();Object(v.trackPromise)(a())}),[ce,G,X]),Object(n.useEffect)((function(){t&&function(){var e=Object(p.a)(d.a.mark((function e(){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'\n        query {\n          userStoryNotifications(where: {message: "User story privacy policy has been updated"}) {\n            message\n            id\n            users {\n              id\n            }\n            seenBy {\n              id\n            }\n            date\n            link\n          }\n        }'},{withCredentials:!0});case 2:(a=e.sent).data.data.userStoryNotifications&&(r=null===(n=a.data.data.userStoryNotifications[0])||void 0===n?void 0:n.seenBy.map((function(e){return e.id})),a.data.data.userStoryNotifications.length&&!r.includes(t)&&(_(!0),V(a.data.data.userStoryNotifications[0])));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]);var et=function(){var e=Object(p.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=D.seenBy.map((function(e){return e.id}))).push(t),e.next=4,E.a.post("".concat(b.a,"/graphql"),{query:'mutation updateNotifications($seenBy: [ID]){\n          updateUserStoryNotification(input: {\n            where: {\n              id: "'.concat(D.id,'"\n            }\n            data: {\n              seenBy: $seenBy\n            }\n          }) {\n            userStoryNotification {\n              id\n            }\n          }\n        }'),variables:{seenBy:a}},{withCredentials:!0});case 4:_(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tt=function(){var a=Object(p.a)(d.a.mark((function a(){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=4;break}return a.next=3,e();case 3:c({type:"DEAUTHENTICATE"});case 4:_(!1);case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement("title",null,"Home | EOS User story"),r.a.createElement("meta",{name:"description",content:"Share with us how you use our products, relate to other users stories, vote them up, and we'll make sure we deliver cohesive solutions that enhance your experience."}),r.a.createElement("meta",{name:"keywords",content:"feature request, open roadmap, user voice, feature request tracking, issue tracker open source "})),r.a.createElement(A,null),r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper"},r.a.createElement("div",{className:"product-introduction"},r.a.createElement("div",null,r.a.createElement("h1",null,"TELL US YOUR STORY"),r.a.createElement("h2",{className:"subheader"},"Share with us how you use our products, relate to other users' stories, vote them up, and we'll make sure we deliver cohesive solutions that enhance your experience.")),r.a.createElement("div",{className:"img-wrap"},r.a.createElement("img",{className:"profile-picture",src:a(137),alt:"profile pic"}))),r.a.createElement("div",{className:"roadmap"},U.stateList&&U.stateList.map((function(e,t){return r.a.createElement(g,{className:Y===e.status?"btn btn-tabs btn-tabs-selected":"btn btn-tabs",key:t,onClick:function(){K(e.status),f(1)}},r.a.createElement("i",{className:"eos-icons"},e.icon),e.status)}))),r.a.createElement("div",{className:"flex flex-row search-bar"},r.a.createElement("div",{className:"flex flex-row search-controls"},r.a.createElement("div",{className:"flex flex-row search-input"},r.a.createElement("span",null,r.a.createElement("i",{className:"eos-icons"},"search")),r.a.createElement(T,{isOpen:He,userTerm:We,setUserTerm:Ge,setUserQuery:Ze,setUsersSuggestionOpen:Ye}),r.a.createElement("input",{type:"text",name:"search",placeholder:"Search",autoComplete:"off",value:"Title"===Fe?ye:We,onChange:function(e){"Title"===Fe?Oe(e.target.value):(Ge(e.target.value),Ye(!0))},onKeyDown:function(e){"Enter"===e.key&&("Title"===Fe&&ye.length>0?Ie('Title_contains: "'.concat(ye,'"')):We.length>0&&(Ze(We),Ye(!1)))},onFocus:function(){"Author"===Fe&&We.length>0&&Ye(!0)}}),r.a.createElement("div",{className:"close-btn-div"},r.a.createElement("span",{className:"close-btn",onClick:function(){"Title"===Fe&&ye.length>0?Oe(""):We.length>0&&Ge("")}},("Title"===Fe&&ye.length>0||"Author"===Fe&&We.length>0)&&r.a.createElement("i",{className:"eos-icons"},"close"))),r.a.createElement(q,{title:"",reference:Le,curr:Fe,setCurr:De,itemList:["Title","Author"]})),r.a.createElement(g,{type:"submit",className:"btn btn-default",onClick:function(){"Title"===Fe&&ye.length>0?Ie('Title_contains: "'.concat(ye,'"')):We.length>0&&Ze(We)}},"Search")),r.a.createElement("div",{className:"flex flex-row options-bar"},r.a.createElement(q,{title:"Product",reference:Q,curr:te,setCurr:ae,itemList:pe}),r.a.createElement(q,{title:"Categories",reference:Z,curr:ie,setCurr:ue,itemList:ve}),r.a.createElement(q,{title:"Sort By",reference:J,curr:ce,setCurr:se,itemList:U.sortByList}))),Ne?r.a.createElement(N,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{stories:G,state:Y,product:te})),r.a.createElement(P,{getPage:$e,storyCount:k,status:Y,product:te}))),L&&D?r.a.createElement(w,{showButtons:!0,onCancel:tt,isActive:L,show:function(){return _(!1)},onOk:et},r.a.createElement(r.a.Fragment,null,D.message,r.a.createElement(i.a,{className:"link link-default",to:"/".concat(D.link)},"View privacy policy"))):"")},I=a(14),L=a(232),_=function(e){var t=e.type,a=e.status,n=e.message;return r.a.createElement("div",null,a?r.a.createElement("div",{className:"form-error alert alert-section alert-danger"},r.a.createElement("i",{className:"eos-icons alert-icon"},"error"),r.a.createElement("div",{class:"alert-body"},null!==a&&a,null!==n&&n)):r.a.createElement("div",{className:"form-error"},r.a.createElement("i",{className:"eos-icons"},"error"),"required"===t&&"This is required","validate"===t&&"Passwords do not match","emptyDescription"===t&&"Description cannot be empty",null!==n&&n))},B=function(e){var t=e.translator,a=Object(n.useRef)(),c=Object(n.useState)(!1),s=Object(l.a)(c,2),o=s[0],i=s[1];return Object(n.useEffect)((function(){var e=function(e){a.current&&!a.current.contains(e.target)&&i(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[a]),r.a.createElement("div",{className:"dropdown-container",ref:a},r.a.createElement(g,{type:"button",className:"btn btn-secondary",onClick:function(e){i(!o)}},o?r.a.createElement("i",{className:"eos-icons"},"keyboard_arrow_up"):r.a.createElement("i",{className:"eos-icons"},"keyboard_arrow_down"),"\xa0 Language"),o?r.a.createElement("div",{className:"dropdown"},r.a.createElement("ul",{className:"dropdown-list"},r.a.createElement("li",{className:"dropdown-element",onClick:function(){t.changeLanguage("en"),i(!1)}},"English"),r.a.createElement("li",{className:"dropdown-element",onClick:function(){t.changeLanguage("es"),i(!1)}},"Spanish"))):"")},F=a(93),D=a.n(F),V=function(){return r.a.createElement("div",{className:"social-media"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://twitter.com/eosdesignsystem?lang=en"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},r.a.createElement("g",{"data-name":"Group 60"},r.a.createElement("g",{"data-name":"Group 62"},r.a.createElement("g",{"data-name":"Rectangle 278"},r.a.createElement("path",{"data-name":"Rectangle 1959",d:"M0 0h24v24H0z"})),r.a.createElement("g",{"data-name":"Path 18"},r.a.createElement("path",{"data-name":"Path 628",d:"M20.032 6.899a7.368 7.368 0 01-1.887.521 3.1 3.1 0 001.431-1.822 6.77 6.77 0 01-2.082.813A3.291 3.291 0 0011.8 8.656a2.742 2.742 0 00.1.748 9.284 9.284 0 01-6.8-3.448 3.584 3.584 0 00-.423 1.659 3.286 3.286 0 001.464 2.733 3.319 3.319 0 01-1.5-.423v.033a3.283 3.283 0 002.639 3.221 3.008 3.008 0 01-1.5.065 3.3 3.3 0 003.059 2.278 6.642 6.642 0 01-4.1 1.4 6.364 6.364 0 01-.781-.033 9.184 9.184 0 005.076 1.5 9.306 9.306 0 009.371-9.24v-.558a6.727 6.727 0 001.627-1.692z",fill:"#fff"})))))),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.linkedin.com/company/eosdesignsystem/"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},r.a.createElement("g",{"data-name":"Group 61"},r.a.createElement("g",{"data-name":"Group 63"},r.a.createElement("g",{"data-name":"Rectangle 280"},r.a.createElement("path",{"data-name":"Rectangle 1961",d:"M0 0h24v24H0z"})),r.a.createElement("g",{"data-name":"iconfinder 201-LinkedIn 192159"},r.a.createElement("g",{"data-name":"Path 19"},r.a.createElement("path",{"data-name":"Path 630",d:"M16.802 19.604v-6.058a1.8 1.8 0 00-1.747-1.621 1.9 1.9 0 00-1.854 1.541v6.138h-3.23l.053-10.007h3.124l-.025 1.262a3.139 3.139 0 013.106-1.644c2.453 0 3.565 1.41 3.772 4.047v6.347zM6.011 8.175a1.788 1.788 0 11.438 0 1.789 1.789 0 01-.438 0zm1.993 11.441H4.032V9.622l3.97-.025z",fill:"#fff"}))))))))},M=function(){var e=Object(L.a)().t;return r.a.createElement("div",{className:"container-left"},r.a.createElement("div",{className:"container-left-content"},r.a.createElement("div",{className:"header header-uppercase"},e("authentication:header-left")),r.a.createElement("p",null,e("authentication:user-stories-description")),r.a.createElement("div",{className:"footer"},r.a.createElement("p",null,e("authentication:footer-left")," -"," ",r.a.createElement("a",{className:"link link-default",href:"/policies"},"Learn More"))),r.a.createElement(V,null)))},H=function(e){var t=e.children,a=e.logo,n=Object(L.a)(),c=n.t,s=n.i18n;return r.a.createElement("div",{className:"container-right"},r.a.createElement("div",{className:"flex flex-row flex-space-between"},r.a.createElement("div",{className:"image image-logo eos-logo-resize"},r.a.createElement("img",{src:null!==a&&void 0!==a?a:D.a,alt:"EOS Logo"})),r.a.createElement(B,{translator:s})),t,r.a.createElement("div",{className:"footer"},r.a.createElement("span",null,r.a.createElement("i",{className:"eos-icons"},"copyright"),r.a.createElement("span",null," ",c("authentication:footer-right")," ")),r.a.createElement("a",{className:"link link-default",href:"/policies"}," ","Cookies and Privacy policy")),r.a.createElement("div",{className:"cookies-mobile"},r.a.createElement("p",null,c("authentication:footer-left")," -"," ",r.a.createElement("a",{className:"link link-default",href:"/policies"},"Learn More"))))},Y=function(e){var t=e.children;return r.a.createElement("div",{className:"authentication-wrapper"},r.a.createElement("div",{className:"authentication"},t))},K=function(e){var t=e.message,a=Object(L.a)().t,c=C().login,s=Object(I.a)(),o=s.register,u=s.handleSubmit,m=s.errors,f=Object(n.useState)(!1),E=Object(l.a)(f,2),b=E[0],v=E[1],w=Object(n.useContext)(x),y=w.state,O=w.dispatch,N=function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c({identifier:t.identifier,password:t.password});case 3:a=e.sent,localStorage.setItem("id",a.user.id),localStorage.setItem("username",a.user.username),localStorage.setItem("email",a.user.email),O({type:"AUTHENTICATE"}),Object(i.c)("/",{replace:!0}),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return y.auth?(Object(i.c)("/",{replace:!0}),null):r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement("title",null,"Login | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(Y,null,r.a.createElement(M,null),r.a.createElement(H,null,r.a.createElement("div",null,r.a.createElement("form",{className:"form-default",onSubmit:u(N)},r.a.createElement("div",{className:"header"},a("authentication:title-sign-in")),t&&r.a.createElement(_,{message:t}),y.errorCode&&r.a.createElement(_,{status:y.errorCode}),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"identifer"},a("authentication:username-label")),r.a.createElement("input",{className:"input-default",type:"text",name:"identifier",ref:o({required:!0})}),m.identifier&&r.a.createElement(_,{type:m.identifier.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"password"},a("authentication:password-label")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{className:"input-default",type:b?"text":"password",name:"password",ref:o({required:!0})}),r.a.createElement("div",{className:"input-group-append",onClick:function(){return v(!b)}},r.a.createElement("i",{className:"eos-icons eos-18"},b?"visibility_off ":"visibility"))),m.password&&r.a.createElement(_,{type:m.password.type})),r.a.createElement(g,{type:"submit",className:"btn btn-default"},a("authentication:login-label"))),r.a.createElement("div",{className:"flex flex-row flex-space-between margin-top-l"},r.a.createElement(i.a,{className:"link link-default",to:"/forgotPassword"},a("authentication:forgot-password")),r.a.createElement(i.a,{className:"link link-default",to:"/register"},a("authentication:create-account")))))))},z=function(){var e=C().registerUser,t=Object(n.useContext)(x),a=t.state,c=t.dispatch,s=Object(I.a)(),o=s.register,l=s.handleSubmit,u=s.errors,m=Object(L.a)().t,f=function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e({username:a.username,email:a.email,password:a.password});case 3:n=t.sent,localStorage.setItem("status",n.status),localStorage.setItem("id",n.user.id),localStorage.setItem("username",n.user.username),localStorage.setItem("email",n.user.email),c({type:"AUTHENTICATE"}),Object(i.c)("/",{replace:!0}),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(0);case 14:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}();return a.auth?(Object(i.c)("/",{replace:!0}),null):r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement("title",null,"Registration page | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(Y,null,r.a.createElement(M,null),r.a.createElement(H,null,r.a.createElement("div",null,r.a.createElement("form",{className:"form-default",onSubmit:l(f)},r.a.createElement("div",{className:"header"},m("authentication:title-sign-up")),a.errorCode&&r.a.createElement(_,{status:a.errorCode}),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"username"},m("authentication:username-label")),r.a.createElement("input",{className:"input-default",type:"text",name:"username",ref:o({required:!0})}),u.username&&r.a.createElement(_,{type:u.username.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"email"},m("authentication:email-label")),r.a.createElement("input",{className:"input-default",type:"text",name:"email",ref:o({required:!0})}),u.email&&r.a.createElement(_,{type:u.email.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"password"},m("authentication:password-label")),r.a.createElement("input",{className:"input-default",type:"password",name:"password",ref:o({required:"This is required",minLength:{value:8,message:"Password must have at least 8 characters"}})}),u.password&&r.a.createElement(_,{message:u.password.message})),r.a.createElement("div",{className:"form-element"},r.a.createElement("div",{className:"flex flex-row flex-align-center "},r.a.createElement("input",{type:"checkbox",name:"tc",ref:o({required:"You must accept our Terms and Conditions"})}),r.a.createElement("label",{htmlFor:"tc"},"I agree to the"," ",r.a.createElement(i.a,{className:"link link-default",to:"/policies"},"Terms and Conditions"),u.tc&&r.a.createElement(_,{message:u.tc.message})))),r.a.createElement(g,{type:"submit",className:"btn btn-default"},m("authentication:register-label"))),r.a.createElement("div",{className:"flex flex-row flex-space-between margin-top-l"},r.a.createElement(i.a,{className:"link link-default",to:"/login"},m("authentication:existing-user")))))))},W=function(){var e=Object(L.a)().t,t=Object(n.useContext)(x).state,a=C().forgotPassword,c=Object(I.a)(),s=c.register,o=c.handleSubmit,u=c.errors,m=Object(n.useState)(""),f=Object(l.a)(m,2),E=f[0],b=f[1],v=function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({email:t.email});case 3:n=e.sent,b(n),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement("title",null,"Forgot password? | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(Y,null,r.a.createElement(M,null),r.a.createElement(H,null,r.a.createElement("div",null,r.a.createElement("div",{className:"header"},e("authentication:forgot-password")),E?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"We have e-mailed you a password reset link")):r.a.createElement(r.a.Fragment,null,t.errorCode&&r.a.createElement(_,{status:t.errorCode}),r.a.createElement("form",{className:"form-default",onSubmit:o(v)},r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"email"},e("authentication:email-label")),r.a.createElement("input",{className:"input-default",type:"email",name:"email",ref:s({required:!0})}),u.email&&r.a.createElement(_,{type:u.email.type})),r.a.createElement(g,{type:"submit",className:"btn btn-default"},e("authentication:submit-label"))),r.a.createElement("div",{className:"flex flex-row flex-space-between margin-top-l"},r.a.createElement(i.a,{className:"link link-default",to:"/login"},e("authentication:existing-user"))))))))},G=function(){var e=Object(L.a)().t,t=Object(n.useContext)(x).state,a=C().resetPassword,c=Object(I.a)(),s=c.register,o=c.handleSubmit,u=c.errors,m=Object(i.d)(),f=Object(n.useState)(""),E=Object(l.a)(f,2),b=E[0],v=E[1],w=function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({code:m.search.slice(6),password:t.password,passwordConfirmation:t.passwordConfirmation});case 3:n=e.sent,v(n),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement("title",null,"Reset your password | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(Y,null,r.a.createElement(M,null),r.a.createElement(H,null,r.a.createElement("div",null,b?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header"},e("authentication:forgot-password")),r.a.createElement("p",null,"Your password has been reset."),r.a.createElement("div",{className:"flex flex-row flex-space-between"},r.a.createElement(i.a,{className:"link link-default",to:"/login"},e("authentication:reset-password-done")))):r.a.createElement(r.a.Fragment,null,t.errorCode&&r.a.createElement(_,{status:t.errorCode}),r.a.createElement("form",{className:"form-default",onSubmit:o(w)},r.a.createElement("div",{className:"header"},e("authentication:reset-password")),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"password"},e("authentication:new-password")),r.a.createElement("input",{className:"input-default",type:"password",name:"password",ref:s({required:!0})}),u.password&&r.a.createElement(_,{type:u.password.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"confirm-password"},e("authentication:confirm-password")),r.a.createElement("input",{className:"input-default",type:"password",name:"passwordConfirmation",ref:s({required:!0})}),u.passwordConfirmation&&r.a.createElement(_,{type:u.passwordConfirmation.type})),r.a.createElement(g,{type:"submit",className:"btn btn-default"},e("authentication:submit-label"))))))))},X=a(37),Q=a.n(X),J=a(38),Z=a.n(J),$=function(e){var t=e.listToBeSearched,a=e.title,c=Object(n.useState)([]),s=Object(l.a)(c,2),o=s[0],i=s[1];return Object(n.useEffect)((function(){!function(){var e=[];if(""!==a){for(var n=0;n<t.length;n++){var r=t[n].Title;r.toUpperCase().indexOf(a.toUpperCase())>-1&&e.push({id:t[n].id,Title:r,Description:t[n].Description,followers:t[n].followers})}i(e)}else i(e)}()}),[a,t]),o.length>0?r.a.createElement("div",{className:"flex flex-column title-search"},r.a.createElement("h4",null,r.a.createElement("i",{className:"eos-icons"},"arrow_forward")," We found some matching results"),o.map((function(e,t){return r.a.createElement("div",{className:"story title-search-results",onClick:function(){return window.open("/story/".concat(e.id),"_blank")},key:t},r.a.createElement("div",{className:"stories-content title-search-result"},r.a.createElement("h4",null,e.Title),e.Description.replace(/<\s*[^>]*>/gi,"")),r.a.createElement("div",{className:"icon-display"},e.followers.length,r.a.createElement("i",{className:"eos-icons"},"thumb_up")))}))):""},ee=a(39),te=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(ee.a)({multiple:!0,onDrop:function(e){c((function(t){return[].concat(Object(u.a)(t),Object(u.a)(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})}))))}))}}),o=s.getRootProps,i=s.getInputProps,m=a.map((function(e){return r.a.createElement("div",{className:"preview-root",key:e.name},r.a.createElement("div",{className:"preview-inner"},r.a.createElement("img",{src:e.preview,className:"preview-image",alt:"preview"})))}));return Object(n.useEffect)((function(){return function(){a.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[a]),r.a.createElement("section",{className:"container"},r.a.createElement("div",o({className:"dropzone"}),r.a.createElement("input",i()),r.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files")),r.a.createElement("aside",{className:"preview-container"},m))},ae=function(){var e=Object(n.useContext)(x).state,t=Object(I.a)(),a=t.register,c=t.handleSubmit,s=t.errors,o=t.setValue,u=t.watch,m=Object(n.useState)(!1),f=Object(l.a)(m,2),w=f[0],y=f[1],O=Object(n.useState)([]),j=Object(l.a)(O,2),k=j[0],C=j[1],S=Object(n.useState)([]),P=Object(l.a)(S,2),q=P[0],T=P[1],U=Object(n.useState)([]),R=Object(l.a)(U,2),L=R[0],B=R[1],F=Object(n.useState)([]),D=Object(l.a)(F,2),V=D[0],M=D[1],H=Object(v.usePromiseTracker)().promiseInProgress,Y=Object(n.useState)(0),z=Object(l.a)(Y,2),W=z[0],G=z[1];Object(n.useLayoutEffect)((function(){function e(){G(window.innerWidth)}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'{ __type(name: "ENUM_USERSTORY_CATEGORY") {enumValues {name}}}'});case 2:t=e.sent,C(t.data.data.__type.enumValues.map((function(e){return e.name})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(v.trackPromise)(e());var t=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:"query {\n          products {\n            id\n            Name\n          }\n        }"},{withCredentials:!0});case 2:t=e.sent,B(t.data.data.products);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(v.trackPromise)(t());var a=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'query {\n          __type(name: "ENUM_USERSTORY_PRIORITY") {\n            enumValues {\n              name\n            }\n          }\n        }'});case 2:t=e.sent,T(t.data.data.__type.enumValues.map((function(e){return e.name})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(v.trackPromise)(a()),function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'query {\n            userStories(sort: "votes:desc,createdAt:desc") {\n              id\n              Title\n              Description\n              followers {\n                username\n              }\n            }\n          }'},{withCredentials:!0});case 2:t=e.sent,M(t.data.data.userStories);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]);var X=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t.description&&0!==t.description.length){e.next=3;break}return y(!0),e.abrupt("return");case 3:return t.description=t.description.replace(/"/g,'\\"'),e.next=6,E.a.post("".concat(b.a,"/graphql"),{query:'mutation {\n          createUserStory(\n            input: {\n              data: {\n                Description: "'.concat(t.description,'"\n                Title: "').concat(t.title,'"\n                Category: ').concat(t.category,'\n                user_story_status: "5f0f33205f5695666b0d2e7e"\n                product: "').concat(t.product,'"\n                Priority: ').concat(t.priority,"\n              }\n            }\n          ) {\n            userStory {\n              createdAt\n            }\n          }\n        }\n        ")},{withCredentials:!0});case 6:Object(i.c)("/");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){a("description")})),e.auth?r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement("title",null,"New story | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(A,null),H?r.a.createElement(N,null):r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"flex flex-row body-wrapper"},r.a.createElement("div",{className:"newstory"},r.a.createElement("h3",null,"New Story"),r.a.createElement("form",{className:"form-default",onSubmit:c(X)},r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{className:"input-default",type:"text",name:"title",autoComplete:"off",ref:a({required:!0})}),s.title&&r.a.createElement(_,{type:s.title.type})),W<=1120?r.a.createElement($,{listToBeSearched:V,title:u("title")||""}):"",r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"product"},"Product"),r.a.createElement("select",{className:"select-default",name:"product",ref:a({required:!0})},r.a.createElement("option",{defaultValue:!0,value:""},"Select a product"),L&&L.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.Name)}))),s.product&&r.a.createElement(_,{type:s.product.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"category"},"Category"),r.a.createElement("select",{className:"select-default",name:"category",ref:a({required:!0})},r.a.createElement("option",{defaultValue:!0,value:""},"Select a category"),k&&k.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),s.category&&r.a.createElement(_,{type:s.category.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"priority"},"Priority"),r.a.createElement("select",{className:"select-default",name:"priority",ref:a({required:!0})},r.a.createElement("option",{defaultValue:!0,value:""},"Select priority"),q&&q.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),s.priority&&r.a.createElement(_,{type:s.priority.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement(Q.a,{editor:Z.a,config:{toolbar:["heading","|","bold","italic","|","link","bulletedList","numberedList"]},onChange:function(e,t){o("description",t.getData()),y(!1)},ref:a}),w&&r.a.createElement(_,{type:"emptyDescription"})),r.a.createElement(te,null),r.a.createElement("div",{className:"flex flex-row flex-center"},r.a.createElement(g,{type:"submit",className:"btn btn-default"},"Submit")))),W>1120?r.a.createElement($,{listToBeSearched:V,title:u("title")||""}):""))):r.a.createElement(K,{message:"Please login to create a new story"})},ne=a(13),re=function(e){var t=e.storyId,a=Object(I.a)(),c=a.register,s=a.errors,o=a.handleSubmit,m=Object(I.a)(),f=m.register,v=m.errors,h=m.handleSubmit,w=Object(n.useContext)(x).state,y=localStorage.getItem("id"),O=Object(n.useState)(""),N=Object(l.a)(O,2),j=N[0],k=N[1],C=Object(n.useState)(!1),S=Object(l.a)(C,2),A=S[0],P=S[1],q=Object(n.useState)(),T=Object(l.a)(q,2),U=T[0],R=T[1],L=Object(n.useState)(""),B=Object(l.a)(L,2),F=B[0],D=B[1],V=Object(n.useState)([]),M=Object(l.a)(V,2),H=M[0],Y=M[1],K=Object(n.useState)(),z=Object(l.a)(K,2),W=z[0],G=z[1],X=Object(n.useState)([]),Q=Object(l.a)(X,2),J=Q[0],Z=Q[1];Object(n.useEffect)((function(){(function(){var e=Object(p.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'\n        query {\n          userStory(id: "'.concat(t,'") {\n            user_story_comments {\n              id\n              Comments\n              user {\n                id\n                username\n              }\n              createdAt\n              user_story_comment_replies {\n                createdAt\n                Comments\n                user {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n        ')},{withCredentials:!0});case 2:a=e.sent,Y(a.data.data.userStory.user_story_comments);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,A]);var $=function(){var e=Object(p.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'\n      mutation {\n        createUserStoryComment(input: {\n          data: {\n            Comments: "'.concat(a.addComment,'"\n            user_story: "').concat(t,'"\n            user: "').concat(y,'"\n          }\n        }) {\n          userStoryComment {\n            id\n            user {\n              id\n              username\n            }\n            Comments\n            createdAt\n            user_story_comment_replies {\n              createdAt\n              Comments\n              user {\n                id\n                username\n              }\n            }\n          }\n        }\n      }\n      ')},{withCredentials:!0});case 2:n=e.sent,Y([].concat(Object(u.a)(H),[n.data.data.createUserStoryComment.userStoryComment])),k("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'\n      mutation {\n        createUserStoryCommentThread (input: {\n          data: {\n            Comments: "'.concat(t.addReply,'"\n            user_story_comment: "').concat(U,'"\n            user: "').concat(y,'"\n          }\n        }){\n          userStoryCommentThread {\n            createdAt\n          }\n        }\n      }\n      ')},{withCredentials:!0});case 2:D(""),P((function(e){return!e})),G(null);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"comments-wrapper"},r.a.createElement("h3",null,"Comments"),H.length?H.map((function(e,t){return r.a.createElement("div",{className:"comment",key:t},r.a.createElement("div",{className:"user-avatar"},r.a.createElement("img",{className:"avatar",src:"https://avatars.dicebear.com/api/jdenticon/".concat(e.user.username,".svg"),alt:"Default User Avatar"})),r.a.createElement("div",{className:"comment-content"},r.a.createElement(i.a,{className:"link link-default",to:"/profile/".concat(e.user.id)},e.user.username),r.a.createElement("div",{className:"metadata"},r.a.createElement("div",null,"".concat(e.createdAt.slice(0,10),"  ").concat(e.createdAt.slice(11,19)))),r.a.createElement("p",null,e.Comments),r.a.createElement("div",{className:"reply-action"},w.auth&&r.a.createElement(g,{className:"btn btn-default",onClick:function(){R(e.id),G(W===t+1?null:t+1),J.find((function(e){return e===t+1}))?Z((function(e){return e.filter((function(e){return e!==t+1}))})):Z((function(e){return e.concat(t+1)}))}},"Reply"),e.user_story_comment_replies.length>0?r.a.createElement(g,{className:"btn btn-default",onClick:function(){J.find((function(e){return e===t+1}))?Z((function(e){return e.filter((function(e){return e!==t+1}))})):Z((function(e){return e.concat(t+1)}))}},"View Replies (",e.user_story_comment_replies.length,")"):""),J.find((function(e){return e===t+1}))&&e.user_story_comment_replies.map((function(t,a){return r.a.createElement("div",{className:"comment",key:a},r.a.createElement("div",{className:"user-avatar"},r.a.createElement("img",{className:"avatar",src:"https://avatars.dicebear.com/api/jdenticon/".concat(t.user.username,".svg"),alt:"Default User Avatar"})),r.a.createElement("div",{className:"comment-content"},r.a.createElement(i.a,{className:"link link-default",to:"/profile/".concat(e.user.id)},t.user.username),r.a.createElement("div",{className:"metadata"},r.a.createElement("div",null,"".concat(t.createdAt.slice(0,10),"  ").concat(t.createdAt.slice(11,19)))),r.a.createElement("p",null,t.Comments)))})),W===t+1&&w.auth&&r.a.createElement("form",{className:"comment-form",onSubmit:h(ee)},r.a.createElement("div",{className:"field"},r.a.createElement("textarea",{rows:"4",cols:"16",name:"addReply",ref:f({required:!0}),value:F,onChange:function(e){return D(e.target.value)}}),v.addReply&&r.a.createElement(_,{message:"Reply cannot be empty"})),r.a.createElement(g,{className:"btn btn-default"},"Add Reply"))))})):r.a.createElement("h3",null,"No comments yet"),w.auth&&r.a.createElement("form",{className:"comment-form",onSubmit:o($)},r.a.createElement("div",{className:"field"},r.a.createElement("textarea",{rows:"4",name:"addComment",cols:"16",ref:c({required:!0}),value:j,onChange:function(e){return k(e.target.value)}}),s.addComment&&r.a.createElement(_,{message:"Comment cannot be empty"})),r.a.createElement(g,{className:"btn btn-default"},"Add Comment")))},ce=function(e){var t=e.currentStatus,a=Object(n.useState)([]),c=Object(l.a)(a,2),s=c[0],o=c[1];return Object(n.useEffect)((function(){!function(){for(var e=[],a=0;a<U.stateList.length&&(e.push(U.stateList[a].status),U.stateList[a].status!==t);a++);o(e)}()}),[t]),r.a.createElement("div",{className:"flex flex-row flex-space-around status-wrapper"},U.stateList.map((function(e,t){return r.a.createElement("div",{className:"status-element",key:t},r.a.createElement("div",{className:"status flex flex-column"},s.includes(e.status)?r.a.createElement("i",{className:"eos-icons tick"},"check"):r.a.createElement("i",{className:"eos-icons no-tick"}),r.a.createElement("h4",null," ",e.status," ")))})))},se=function(e){var t=e.storyId,a=localStorage.getItem("id"),c=Object(n.useState)(""),s=Object(l.a)(c,2),o=s[0],u=s[1],m=Object(n.useState)(""),f=Object(l.a)(m,2),w=f[0],O=f[1],j=Object(n.useState)(!1),k=Object(l.a)(j,2),x=k[0],C=k[1],S=Object(n.useState)(!1),P=Object(l.a)(S,2),q=P[0],T=P[1],U=Object(v.usePromiseTracker)().promiseInProgress;Object(n.useEffect)((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'query {\n            userStory(id: "'.concat(t,'") {\n              id\n              Title\n              Description\n              user_story_status {\n                Status\n              }\n              author {\n                id\n                username\n              }\n              followers {\n                id\n                username\n              }\n            }\n          }')},{withCredentials:!0});case 2:a=e.sent,u(a.data.data.userStory);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(v.trackPromise)(e()),a&&function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/checkAuthor"),{id:a,storyId:t},{withCredentials:!0});case 2:e.sent.data&&C(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t,a]);var R=function(){var e=Object(p.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,E.a.post("".concat(b.a,"/graphql"),{query:'mutation {\n          updateUserStory(\n            input: { where: { id: "'.concat(t,'" }, data: { Description: "').concat(o.Description+w,'" } }\n          ) {\n            userStory {\n              updatedAt\n            }\n          }\n        }')},{withCredentials:!0});case 3:T(!1),u(Object(ne.a)(Object(ne.a)({},o),{},{Description:"".concat(o.Description+w)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null===o?(Object(i.c)("/404",{replace:!0}),null):r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement("title",null,"".concat(o.Title," | EOS User story")),r.a.createElement("meta",{name:"description",content:"".concat(o.Description)}),r.a.createElement("meta",{name:"keywords",content:"user story, issue tracker"})),r.a.createElement(A,null),U?r.a.createElement(N,null):o?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper"},r.a.createElement(ce,{currentStatus:o.user_story_status.Status}),r.a.createElement("div",{className:"story-heading"},r.a.createElement("h3",null,o.Title),r.a.createElement("div",{className:"flex flex-row flex-space-between"},r.a.createElement(y,{story:o}),r.a.createElement("div",{className:"author-information"},r.a.createElement("h4",null,"By:"," ",r.a.createElement(i.a,{className:"link link-default",to:"/profile/".concat(o.author.id)},o.author.username)),r.a.createElement("div",{className:"user-avatar"},r.a.createElement("img",{className:"avatar",src:"https://avatars.dicebear.com/api/jdenticon/".concat(o.author.username,".svg"),alt:"Default User Avatar"}))))),q?r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{editor:Z.a,config:{toolbar:["heading","|","bold","italic","|","link","bulletedList","numberedList"]},onChange:function(e,t){var a=t.getData();O(a)}})):r.a.createElement("div",{className:"story-description",dangerouslySetInnerHTML:{__html:o.Description}}),r.a.createElement("div",{className:"story-buttons-container"},x&&!q?r.a.createElement(g,{className:"btn btn-default",onClick:function(){return T(!0)}},"Edit"):"",q?r.a.createElement(g,{className:"btn btn-default",onClick:R},"Save"):"",q?r.a.createElement(g,{className:"btn btn-default",onClick:function(){return T(!1)}},"Cancel"):""),r.a.createElement(re,{storyId:t})))):"")},oe=function(){var e=Object(n.useContext)(x).state,t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)("My Submissions"),i=Object(l.a)(o,2),m=i[0],f=i[1],w=Object(n.useState)("Under consideration"),y=Object(l.a)(w,2),j=y[0],k=y[1],C=Object(n.useState)("All"),S=Object(l.a)(C,2),P=S[0],T=S[1],R=Object(n.useState)("Most Voted"),I=Object(l.a)(R,2),L=I[0],_=I[1],B=Object(n.useState)("All"),F=Object(l.a)(B,2),D=F[0],V=F[1],M=Object(n.useRef)(),H=Object(n.useRef)(),Y=Object(n.useRef)(),z=Object(n.useState)([]),W=Object(l.a)(z,2),G=W[0],X=W[1],Q=Object(v.usePromiseTracker)().promiseInProgress,J=localStorage.getItem("id"),Z=Object(n.useState)([]),$=Object(l.a)(Z,2),ee=$[0],te=$[1];return Object(n.useEffect)((function(){var e=function(e,t){return e.followers.length>t.followers.length?-1:1},t=function(e,t){return e.user_story_comments.length>t.user_story_comments.length?-1:1},a=function(){var a=Object(p.a)(d.a.mark((function a(){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:"Most Voted"===L&&s(c.sort(e)),"Most Discussed"===L&&s(c.sort(t));case 2:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();Object(v.trackPromise)(a())}),[L,c,s]),Object(n.useEffect)((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'query {\n            userStories(where: { author: "'.concat(J,'" }) {\n              id\n              Title\n              Description\n              followers {\n                id\n                username\n              }\n              user_story_comments {\n                Comments\n              }\n              product {\n                Name\n              }\n              author {\n                id\n                username\n              }\n              user_story_status {\n                Status\n              }\n              Category\n            }\n          }')},{withCredentials:!0});case 2:t=e.sent,s(t.data.data.userStories);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'query {\n            userStories(where: { followers: "'.concat(J,'" }) {\n              id\n              Title\n              Description\n              followers {\n                id\n              }\n              user_story_comments {\n                Comments\n              }\n              product {\n                Name\n              }\n              author {\n                id\n                username\n              }\n              user_story_status {\n                Status\n              }\n            }\n          }')},{withCredentials:!0});case 2:t=e.sent,s(t.data.data.userStories);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();"My Submissions"===m?Object(v.trackPromise)(e()):Object(v.trackPromise)(t())}),[m,J]),Object(n.useEffect)((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:"query {\n          products {\n            Name\n          }\n        }"},{withCredentials:!0});case 2:t=e.sent,te(t.data.data.products.map((function(e){return e.Name}))),te((function(e){return["All"].concat(Object(u.a)(e))}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(v.trackPromise)(e())}),[J]),Object(n.useEffect)((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'{ __type(name: "ENUM_USERSTORY_CATEGORY") {enumValues {name}}}'});case 2:t=e.sent,X(t.data.data.__type.enumValues.map((function(e){return e.name}))),X((function(e){return["All"].concat(Object(u.a)(e))}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(v.trackPromise)(e())}),[]),e.auth?r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement("title",null,"My stories | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(A,null),r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper my-stories"},r.a.createElement("h3",null,"My Stories"),r.a.createElement("div",{className:"flex flex-row roadmap-one"},r.a.createElement(g,{className:"My Submissions"===m?"btn btn-tabs btn-tabs-selected":"btn btn-tabs",onClick:function(){return f("My Submissions")}},"My Submissions"),"\xa0 \xa0",r.a.createElement(g,{className:"Following"===m?"btn btn-tabs btn-tabs-selected":"btn btn-tabs",onClick:function(){return f("Following")}},"Following")),r.a.createElement("div",{className:"flex flex-row flex-space-between roadmap-one"},U.stateList&&U.stateList.map((function(e,t){return r.a.createElement(g,{className:j===e.status?"btn btn-tabs btn-tabs-selected":"btn btn-tabs",key:t,onClick:function(){return k(e.status)}},r.a.createElement("i",{className:"eos-icons"},e.icon),e.status)}))),r.a.createElement("div",{className:"flex flex-row options-bar"},r.a.createElement(q,{title:"Product",reference:M,curr:P,setCurr:T,itemList:ee}),r.a.createElement(q,{title:"Categories",reference:Y,curr:D,setCurr:V,itemList:G}),r.a.createElement(q,{title:"Sort By",reference:H,curr:L,setCurr:_,itemList:U.sortByList})),Q?r.a.createElement(N,null):r.a.createElement("div",{className:"flex flex-column"},r.a.createElement(O,{stories:c,state:j,product:P}))))):r.a.createElement(K,{message:"Please login to access your stories"})},le=a(15),ie=function(e){var t=e.userId,a=e.show,c=e.setShow,s=e.profilePicURL,o=e.profilePicId,i=Object(n.useState)(null),u=Object(l.a)(i,2),m=u[0],f=u[1],v=Object(n.useState)(null),h=Object(l.a)(v,2),g=h[0],y=h[1],O=Object(n.useState)(!s),j=Object(l.a)(O,2),k=j[0],x=j[1],C=Object(n.useState)(!1),S=Object(l.a)(C,2),A=S[0],P=S[1],q=function(){URL.revokeObjectURL(null===g||void 0===g?void 0:g.preview),y(null),c(!1)},T=function(){var e=Object(p.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g||k&&o){e.next=3;break}return q(),e.abrupt("return");case 3:if(!s||!k||g){e.next=15;break}return e.prev=4,P(!0),e.next=8,E.a.delete("".concat(b.a,"/upload/files/").concat(o),{withCredentials:!0});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),f("Unable to update profile picture. Please try again later.");case 13:e.next=35;break;case 15:if((a=new FormData).append("files",g),a.append("ref","user"),a.append("refId",t),a.append("source","users-permissions"),a.append("field","profilePicture"),e.prev=21,P(!0),!s||!k){e.next=28;break}return e.next=26,E.a.all([E.a.delete("".concat(b.a,"/upload/files/").concat(o),{withCredentials:!0}),E.a.post("".concat(b.a,"/upload"),a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})]);case 26:e.next=30;break;case 28:return e.next=30,E.a.post("".concat(b.a,"/upload"),a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});case 30:e.next=35;break;case 32:e.prev=32,e.t1=e.catch(21),f("Error updating profile picture. Try updating later");case 35:P(!1),c(!1),window.location.reload();case 38:case"end":return e.stop()}}),e,null,[[4,10],[21,32]])})));return function(){return e.apply(this,arguments)}}(),U=Object(ee.a)({multiple:!1,accept:"image/jpeg, image/png, image/gif",minSize:0,maxSize:153600,onDrop:function(e,t){var a=Object(l.a)(e,1)[0],n=Object(l.a)(t,1)[0];try{y(Object.assign(a,{preview:URL.createObjectURL(a)})),f(null)}catch(c){var r=n.errors.map((function(e){return e.code}));-1!==r.indexOf("file-too-large")&&f("Please upload a file smaller than 150 kB"),-1!==r.indexOf("file-invalid-type")&&f("Please upload a file with .png, .jpg/.jpeg or .gif extensions")}}}),R=U.getRootProps,I=U.getInputProps;return Object(n.useEffect)((function(){return function(){URL.revokeObjectURL(null===g||void 0===g?void 0:g.preview)}}),[g]),A?r.a.createElement(w,{isActive:!0,showButtons:!1},r.a.createElement(N,null)):r.a.createElement(w,{isActive:a,handleClose:function(){return c(!1)},onCancel:q,okText:"Save",onOk:T,showButtons:!0},r.a.createElement("section",{className:"container"},!k&&r.a.createElement("aside",{className:"preview-container"},r.a.createElement("span",{className:"remove-img-icon",onClick:function(){x(!0),y(null)}},r.a.createElement("i",{className:"eos-icons"},"delete")),r.a.createElement("img",{src:s,className:"user-profile-avatar-img",alt:"preview"})),k&&(g?r.a.createElement("aside",{className:"preview-container"},r.a.createElement("span",{className:"remove-img-icon",onClick:function(){URL.revokeObjectURL(g.preview),y(null)}},r.a.createElement("i",{className:"eos-icons"},"delete")),r.a.createElement("img",{src:g.preview,className:"user-profile-avatar-img",alt:"preview"})):r.a.createElement("div",R({className:"dropzone"}),r.a.createElement("input",I()),r.a.createElement("p",null,"Drag 'n' drop your image here, or click to select one. For best results upload images with 1:1 aspect ratio. Maximum allowed file-size is 150 kB."))),!!m&&r.a.createElement(_,{message:m})))},ue=a(103),me=function(e){return r.a.createElement("input",Object.assign({className:"input-default",type:"text"},e))},de=function(e){return r.a.createElement("textarea",Object.assign({type:"text"},e,{rows:4,cols:60}))},pe=function(e){var t=e.name,a=e.value,c=e.type,s=e.handleInputChange,o=e.updateProfile,i=e.children,u=e.allowEditing,m=Object(ue.a)(e,["name","value","type","handleInputChange","updateProfile","children","allowEditing"]),d=Object(n.useState)(!1),p=Object(l.a)(d,2),f=p[0],E=p[1];return r.a.createElement("div",{className:"editable-label"},!f&&r.a.createElement(r.a.Fragment,null,i,u&&r.a.createElement("button",{className:"editable-label-edit-btn",onClick:function(){return E(!f)}},r.a.createElement("i",{className:"eos-icons"},"mode_edit"))),f&&r.a.createElement(r.a.Fragment,null,function(e){switch(e){case"text":return r.a.createElement(me,Object.assign({onChange:s,defaultValue:a,onKeyPress:function(e){s(e),"Enter"===e.key&&(o(),E(!f))},name:t},m));case"textArea":return r.a.createElement(de,Object.assign({onChange:s,defaultValue:a,onKeyPress:s,name:t},m));default:return"No component was found"}}(c),r.a.createElement("button",{onClick:function(){E(!f),o()}},r.a.createElement("i",{className:"eos-icons"},"save"))))},fe=function(e){var t=e.allowEditing,a=e.showModal;return t?r.a.createElement("div",{className:"user-profile-edit-badge",onClick:a},"Edit ",r.a.createElement("i",{className:"eos-icons"},"mode_edit")):null},Ee=function(e){var t=e.avatarURL,a=e.allowEditing,c=e.userId,s=e.profilePicURL,o=e.profilePicId,i=Object(n.useState)(!1),u=Object(l.a)(i,2),m=u[0],d=u[1];return r.a.createElement("div",{className:"user-profile-avatar"},r.a.createElement(fe,{allowEditing:a,showModal:function(){return d(!0)}}),r.a.createElement("img",{className:"user-profile-avatar-img",src:t,alt:"User avatar"}),m&&r.a.createElement(ie,{userId:c,show:m,setShow:d,profilePicURL:s,profilePicId:o}))},be=function(e){var t=e.user;return r.a.createElement("div",{className:"user-profile-settings"},r.a.createElement("ul",null,r.a.createElement("li",null,"Email address:",r.a.createElement("span",null,null===t||void 0===t?void 0:t.email)),r.a.createElement("li",null,"Username:",r.a.createElement("span",null,null===t||void 0===t?void 0:t.username)),r.a.createElement("li",null,r.a.createElement("a",{className:"link link-default",href:"/changePassword"},"Change password"))))},ve=function(e){var t,a=e.user,n=e.handleInputChange,c=e.allowEditing,s=e.updateProfile;return r.a.createElement("div",{className:"user-profile-details"},r.a.createElement(pe,{type:"text",name:"Name",value:null!==(t=a.Name)&&void 0!==t?t:a.username,className:"input-default",handleInputChange:n,allowEditing:c,updateProfile:s,placeholder:"Your name"},r.a.createElement("h2",{className:"user-profile-name"},a.Name?a.Name:a.username)),r.a.createElement(pe,{type:"textArea",name:"Bio",value:a.Bio,handleInputChange:n,allowEditing:c,updateProfile:s,placeholder:"Say something about yourself"},r.a.createElement("p",null,a.Bio||(c?"Say something about yourself":"Hi There!"))),r.a.createElement("div",{className:"user-profile-extra"},r.a.createElement("ul",null,c||a.Profession?r.a.createElement("li",null,"Profession",r.a.createElement(pe,{type:"text",name:"Profession",value:a.Profession,handleInputChange:n,allowEditing:c,updateProfile:s,placeholder:"Your job title"},r.a.createElement("span",null,a.Profession?a.Profession:"Your job title"))):null,c||a.Company?r.a.createElement("li",null,"Company",r.a.createElement(pe,{type:"text",name:"Company",value:a.Company,handleInputChange:n,allowEditing:c,updateProfile:s,placeholder:"Your company name"},r.a.createElement("span",null,a.Company?a.Company:"Your company name"))):null,c||a.LinkedIn?r.a.createElement("li",null,"LinkedIn",r.a.createElement(pe,{type:"text",name:"LinkedIn",value:a.LinkedIn,handleInputChange:n,allowEditing:c,updateProfile:s,placeholder:"Your LinkedIn username"},r.a.createElement("span",null,a.LinkedIn?r.a.createElement("a",{className:"link link-default",href:"https://www.linkedin.com/in/".concat(null===a||void 0===a?void 0:a.LinkedIn),target:"_blank",rel:"noopener noreferrer"},a.LinkedIn):"Your LinkedIn username"))):null,c||a.Twitter?r.a.createElement("li",null,"Twitter",r.a.createElement(pe,{type:"text",name:"Twitter",value:a.Twitter,handleInputChange:n,allowEditing:c,updateProfile:s,placeholder:"Your Twitter handle"},r.a.createElement("span",null,a.Twitter?r.a.createElement("a",{className:"link link-default",href:"https://twitter.com/".concat(null===a||void 0===a?void 0:a.Twitter),target:"_blank",rel:"noopener noreferrer"},a.Twitter?"@".concat(a.Twitter):""):"Your Twitter handle"))):null)))},he=function(e){e.children;var t,a,n,c,s,o,l=e.allowEditing,i=e.user,u=e.handleInputChange,m=e.updateProfile;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"user-profile margin-top-xxl margin-bottom-m"},r.a.createElement(Ee,{avatarURL:null!==(t=null===i||void 0===i||null===(a=i.profilePicture)||void 0===a?void 0:a.url)&&void 0!==t?t:"https://avatars.dicebear.com/api/jdenticon/".concat(i.username,".svg"),allowEditing:l,userId:i.id,profilePicURL:null!==(n=null===i||void 0===i||null===(c=i.profilePicture)||void 0===c?void 0:c.url)&&void 0!==n?n:null,profilePicId:null!==(s=null===i||void 0===i||null===(o=i.profilePicture)||void 0===o?void 0:o.id)&&void 0!==s?s:null}),r.a.createElement(ve,{user:i,handleInputChange:u,updateProfile:m,allowEditing:l})),l&&r.a.createElement(be,{user:i}))},ge=function(){var e=localStorage.getItem("id"),t=Object(n.useContext)(x).state,a=Object(n.useState)(""),c=Object(l.a)(a,2),s=c[0],o=c[1],i=Object(n.useState)(!1),u=Object(l.a)(i,2)[1],m=Object(v.usePromiseTracker)().promiseInProgress,f=function(){var t=Object(p.a)(d.a.mark((function t(){var a,n,r,c,o,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'mutation {\n        updateUser(input: {\n          where: {\n            id: "'.concat(e,'"\n          }\n          data: {\n            Name: "').concat(null!==(a=s.Name)&&void 0!==a?a:s.username,'"\n            Profession: "').concat(null!==(n=s.Profession)&&void 0!==n?n:"",'"\n            Company: "').concat(null!==(r=s.Company)&&void 0!==r?r:"",'"\n            LinkedIn: "').concat(null!==(c=s.LinkedIn)&&void 0!==c?c:"",'"\n            Twitter: "').concat(null!==(o=s.Twitter)&&void 0!==o?o:"",'"\n            Bio: "').concat(null!==(l=s.Bio)&&void 0!==l?l:"",'"\n          }\n        }) {\n          user {\n            username\n          }\n        }\n      }')},{withCredentials:!0});case 2:t.sent&&u(!0);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){var t=function(){var t=Object(p.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'query {\n          user(id: "'.concat(e,'") {\n            profilePicture {\n              id\n              url\n            }\n            Name\n            Bio\n            username\n            Company\n            Profession\n            email\n            LinkedIn\n            Twitter\n          }\n        }\n        ')},{withCredentials:!0});case 2:a=t.sent,o(a.data.data.user);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e&&Object(v.trackPromise)(t())}),[e]),t.auth?r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement("title",null,"My profile | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(A,null),m?r.a.createElement(N,null):r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper"},r.a.createElement("div",{className:"flex flex-row"},r.a.createElement("div",{className:"flex flex-column"},r.a.createElement(he,{user:Object.assign(s,{id:e}),handleInputChange:function(e){o(Object(ne.a)(Object(ne.a)({},s),{},Object(le.a)({},e.target.name,e.target.value)))},updateProfile:f,allowEditing:!0},r.a.createElement("h1",null,"Hello world"))))))):r.a.createElement(K,{message:"Please login to access your profile"})},we=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement("title",null,"404 Not Found | EOS User story")),r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper pg-404"},r.a.createElement("svg",{className:"svg-right flex flex-column",width:"121",height:"240",viewBox:"0 0 121 240",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{id:"g-right"},r.a.createElement("path",{id:"r-4",d:"M120 240H75C66.72 240 60 233.28 60 225V180H105C113.28 180 120 186.72 120 195V240Z",fill:"#0AA5A5"}),r.a.createElement("path",{id:"r-2",d:"M61 120H106C114.28 120 121 113.28 121 105V60H76C67.72 60 61 66.72 61 75V120Z",fill:"#0AA5A5"}),r.a.createElement("path",{id:"r-3",d:"M0 180H45C53.28 180 60 173.28 60 165V120H15C6.72 120 0 126.72 0 135V180Z",fill:"#00CCD1"}),r.a.createElement("path",{id:"r-1",d:"M60 60H15C6.72 60 0 53.28 0 45V0H45C53.28 0 60 6.72 60 15V60Z",fill:"#00CCD1"}))),r.a.createElement("h1",{className:"heading-404"},"404"),r.a.createElement("hr",{className:"hr-404"}),r.a.createElement("p",{className:"p-404"},"The page you are looking for could not be found."),r.a.createElement(g,{className:"btn btn-default btn-404",onClick:function(){return Object(i.c)("/")}},"Back to Home"),r.a.createElement("svg",{className:"svg-left flex flex-column",width:"121",height:"240",viewBox:"0 0 121 240",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{id:"g-left"},r.a.createElement("path",{id:"l-4",d:"M120 240H75C66.72 240 60 233.28 60 225V180H105C113.28 180 120 186.72 120 195V240Z",fill:"#1A2A3A"}),r.a.createElement("path",{id:"l-2",d:"M61 120H106C114.28 120 121 113.28 121 105V60H76C67.72 60 61 66.72 61 75V120Z",fill:"#1A2A3A"}),r.a.createElement("path",{id:"l-3",d:"M0 180H45C53.28 180 60 173.28 60 165V120H15C6.72 120 0 126.72 0 135V180Z",fill:"#00CCD1"}),r.a.createElement("path",{id:"l-1",d:"M60 60H15C6.72 60 0 53.28 0 45V0H45C53.28 0 60 6.72 60 15V60Z",fill:"#00CCD1"}))))))},ye=function(e){var t=e.profileId,a=Object(n.useState)([]),c=Object(l.a)(a,2),s=c[0],o=c[1],m=Object(n.useState)(""),f=Object(l.a)(m,2),w=f[0],y=f[1],j=Object(n.useState)("Under consideration"),k=Object(l.a)(j,2),x=k[0],C=k[1],S=Object(v.usePromiseTracker)().promiseInProgress,P=Object(n.useRef)(),T=Object(n.useRef)(),R=Object(n.useRef)(),I=Object(n.useState)("All"),L=Object(l.a)(I,2),_=L[0],B=L[1],F=Object(n.useState)("Most Voted"),D=Object(l.a)(F,2),V=D[0],M=D[1],H=Object(n.useState)("All"),Y=Object(l.a)(H,2),K=Y[0],z=Y[1],W=Object(n.useState)([]),G=Object(l.a)(W,2),X=G[0],Q=G[1],J=Object(n.useState)([]),Z=Object(l.a)(J,2),$=Z[0],ee=Z[1];return Object(n.useEffect)((function(){(function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:"query {\n          products {\n            Name\n          }\n        }"},{withCredentials:!0});case 2:t=e.sent,Q(t.data.data.products.map((function(e){return e.Name}))),Q((function(e){return["All"].concat(Object(u.a)(e))}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'{ __type(name: "ENUM_USERSTORY_CATEGORY") {enumValues {name}}}'});case 2:t=e.sent,ee(t.data.data.__type.enumValues.map((function(e){return e.name}))),ee((function(e){return["All"].concat(Object(u.a)(e))}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(v.trackPromise)(e())}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'query {\n          user(id: "'.concat(t,'") {\n            profilePicture {\n              url\n            }\n            Name\n            Bio\n            username\n            Company\n            Profession\n            email\n            LinkedIn\n            Twitter\n          }\n        }\n        ')},{withCredentials:!0});case 2:a=e.sent,y(a.data.data.user);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t&&Object(v.trackPromise)(e())}),[t]),Object(n.useEffect)((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'query {\n            user(id: "'.concat(t,'") {\n              user_stories {\n                id\n                Title\n                Description\n                user_story_status {\n                  Status\n                }\n                followers {\n                  username\n                }\n                product {\n                  Name\n                }\n                author {\n                  id\n                  username\n                }\n                user_story_comments {\n                  Comments\n                }\n                Category\n              }\n            }\n          }')},{withCredentials:!0});case 2:a=e.sent,o(a.data.data.user.user_stories);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(v.trackPromise)(e())}),[t]),Object(n.useEffect)((function(){var e=function(e,t){return e.followers.length>t.followers.length?-1:1},t=function(e,t){return e.user_story_comments.length>t.user_story_comments.length?-1:1},a=function(){var a=Object(p.a)(d.a.mark((function a(){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:"Most Voted"===V&&o(s.sort(e)),"Most Discussed"===V&&o(s.sort(t));case 2:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();Object(v.trackPromise)(a())}),[V,s,o]),null===w?(Object(i.c)("/404",{replace:!0}),null):r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement("title",null,"".concat(w.username," | EOS User story")),r.a.createElement("meta",{name:"description",content:"".concat(w.Bio)}),r.a.createElement("meta",{name:"keywords",content:"user story, issue tracker"})),r.a.createElement(A,null),S?r.a.createElement(N,null):r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper"},r.a.createElement("div",{className:"flex flex-row flex-space-around"},r.a.createElement("div",{className:"flex flex-column"},r.a.createElement(he,{user:w}))),r.a.createElement("div",{className:"flex flex-column"},r.a.createElement("h3",null,"Stories by this user"),r.a.createElement("div",{className:"flex flex-row options-bar"},r.a.createElement(q,{title:"Product",reference:P,curr:_,setCurr:B,itemList:X}),r.a.createElement(q,{title:"Categories",reference:R,curr:K,setCurr:z,itemList:$}),r.a.createElement(q,{title:"Sort By",reference:T,curr:V,setCurr:M,itemList:U.sortByList})),r.a.createElement("div",{className:"flex flex-row flex-space-between"},U.stateList&&U.stateList.map((function(e,t){return r.a.createElement(g,{className:x===e.status?"btn btn-tabs btn-tabs-selected":"btn btn-tabs",key:t,onClick:function(){return C(e.status)}},r.a.createElement("i",{className:"eos-icons"},e.icon),e.status)}))),r.a.createElement(O,{stories:s,state:x,product:_})))))},Oe=function(){var e=Object(L.a)().t,t=Object(n.useContext)(x),a=t.state,c=t.dispatch,s=C(),o=s.changePassword,u=s.logout,m=Object(I.a)(),f=m.register,E=m.handleSubmit,b=m.errors,v=Object(n.useState)(""),w=Object(l.a)(v,2),y=w[0],O=w[1],N=function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o(Object(ne.a)(Object(ne.a)({},t),{},{id:localStorage.getItem("id")}));case 3:a=e.sent,O(a),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:c({type:"DEAUTHENTICATE"}),Object(i.c)("/login");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.auth?r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement("title",null,"Change your password | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(Y,null,r.a.createElement(M,null),r.a.createElement(H,null,r.a.createElement("div",null,y?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header"},e("authentication:success")),r.a.createElement("p",null,"Your password has been reset."),r.a.createElement("div",{className:"flex flex-row flex-space-between"},r.a.createElement("span",{className:"link link-default",onClick:j},e("authentication:reset-password-done")))):r.a.createElement(r.a.Fragment,null,a.errorCode&&r.a.createElement(_,{status:a.errorCode}),r.a.createElement("form",{className:"form-default",onSubmit:E(N)},r.a.createElement("div",{className:"header"},e("authentication:reset-password")),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"password"},e("authentication:old-password")),r.a.createElement("input",{className:"input-default",type:"password",name:"oldPassword",ref:f({required:!0})}),b.oldPassword&&r.a.createElement(_,{type:b.oldPassword.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"password"},e("authentication:new-password")),r.a.createElement("input",{className:"input-default",type:"password",name:"password",ref:f({required:!0})}),b.password&&r.a.createElement(_,{type:b.password.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"confirm-password"},e("authentication:confirm-password")),r.a.createElement("input",{className:"input-default",type:"password",name:"passwordConfirmation",ref:f({required:!0})}),b.passwordConfirmation&&r.a.createElement(_,{type:b.passwordConfirmation.type})),r.a.createElement(g,{type:"submit",className:"btn btn-default"},e("authentication:submit-label")))))))):r.a.createElement(K,{message:"Please login to access your profile"})},Ne=a(98),je=a.n(Ne),ke=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(v.usePromiseTracker)().promiseInProgress;return Object(n.useEffect)((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(b.a,"/graphql"),{query:"query {\n                    userStoryPolicies {\n                      Description\n                    }\n                  }"},{withCredentials:!0});case 2:a=e.sent,c(null===(t=a.data.data.userStoryPolicies)||void 0===t?void 0:t[0].Description);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(v.trackPromise)(e())}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement("title",null,"Cookie & Privacy Policies | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(A,null),r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper"},s?r.a.createElement(N,null):a?r.a.createElement(je.a,null,a&&"".concat(a)):r.a.createElement("h3",null,"No policies"))))},xe=function(){var e=localStorage.getItem("id"),t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],s=a[1],o=Object(v.usePromiseTracker)().promiseInProgress;return Object(n.useEffect)((function(){var t=function(){var t=Object(p.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.post("".concat(b.a,"/graphql"),{query:'query {\n          userStoryNotifications (where: {\n            users: {\n              id: "'.concat(e,'"\n            }\n          }){\n            message\n            id\n            users {\n              id\n            }\n            seenBy {\n              id\n            }\n            date\n            link\n          }\n        }')},{withCredentials:!0});case 2:a=t.sent,s(a.data.data.userStoryNotifications);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(v.trackPromise)(t())}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement("title",null,"Notifications | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(A,null),o?r.a.createElement(N,null):r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper"},r.a.createElement("h3",null,"Notifications"),r.a.createElement("div",{className:"flex flex-column"},c.length>0?c.map((function(e,t){return r.a.createElement("div",{className:"notification",key:t,onClick:function(){return Object(i.c)("/".concat(e.link))}},r.a.createElement("div",{className:"notification-text"},e.message),r.a.createElement("div",{className:"notification-text"},"".concat(e.date.slice(0,10),"  ").concat(e.date.slice(11,19))))})):r.a.createElement("div",{className:"notification"},r.a.createElement("div",{className:"notification-text"},"No notifications at the moment"))))))},Ce=function(e,t){switch(t.type){case"AUTHENTICATE":return Object(ne.a)(Object(ne.a)({},e),{},{auth:!0});case"DEAUTHENTICATE":return Object(ne.a)(Object(ne.a)({},e),{},{auth:!1});case"ERROR":return Object(ne.a)(Object(ne.a)({},e),{},{errorCode:t.payload});default:return e}},Se=function(){return r.a.createElement("div",{className:"footer-main"},r.a.createElement("a",{className:"link link-default",href:"/policies"},"Cookies and Privacy policy"),r.a.createElement("p",null,"We only use strictly necessary cookies"))},Ae={auth:!1,errorCode:null},Pe=function(){var e=Object(n.useReducer)(Ce,Ae),t=Object(l.a)(e,2),a=t[0],c=t[1],s=localStorage.getItem("id");return Object(n.useEffect)((function(){window.addEventListener("storage",(function(e){localStorage.getItem("id")?c({type:"AUTHENTICATE"}):c({type:"DEAUTHENTICATE"})}))}),[]),Object(n.useEffect)((function(){c(s?{type:"AUTHENTICATE"}:{type:"DEAUTHENTICATE"})}),[s]),r.a.createElement(x.Provider,{value:{state:a,dispatch:c}},r.a.createElement(i.b,null,r.a.createElement(R,{path:"/"}),r.a.createElement(z,{path:"/register"}),r.a.createElement(K,{path:"/login"}),r.a.createElement(W,{path:"/forgotPassword"}),r.a.createElement(G,{path:"/resetPassword"}),r.a.createElement(ae,{path:"/newStory"}),r.a.createElement(se,{path:"/story/:storyId"}),r.a.createElement(oe,{path:"/myStories"}),r.a.createElement(ge,{path:"/myProfile"}),r.a.createElement(ye,{path:"/profile/:profileId"}),r.a.createElement(xe,{path:"/notifications"}),r.a.createElement(Oe,{path:"/changePassword"}),r.a.createElement(ke,{path:"/policies"}),r.a.createElement(we,{default:!0})),r.a.createElement(Se,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var qe=a(55),Te=a(27),Ue=a(99),Re={en:a(100),es:Ue};qe.a.use(Te.e).init({resources:Re,lng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});qe.a;s.a.render(r.a.createElement(o.a,null,r.a.createElement(Pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e){e.exports=JSON.parse('{"a":"https://userstory-strapi.herokuapp.com/"}')},92:function(e,t,a){e.exports=a.p+"static/media/user-story-logo.ed111364.svg"},93:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAAAfCAYAAACvUTALAAAABHNCSVQICAgIfAhkiAAACMhJREFUaEO1mW2IXOUVx89zX3aTreKCbQwaNUtMRNqG8S0EVpsJ0mD7QSMt4ofgTFpaKggaUFHUErFdP4jSUBD94j4gSL9Y9otLizTZ1EpbrLirWItBXVpsRdHkatxNmH3OkfO83PvcO/feuTPZLiyTnUzOzvOb//M//3MiYMQvemJDF0SwRzy4cnDEEqX/jH6xoQsU7BHPrW/d1d2buwjhnm/87aOR368Y5aAW1CwQACBI8fD6HMyCmgVl6z6/PnUNqHhWYQSkInnBGydGAjY0rBQUAmhYDtgvz+1gGhQGs8B1+dsBe+Hc6jIoBWOzqEJAikCpCIgi+c3Ft4cGNhSsHCiWZBHY4dEOVgqKPwQGpkCK341W14Aan1UqZEAOFPDPgJG86J3XhwLWGJYGBYG5ekZN5st/5Cv5+HAH06CUpyhfWT6wl4are3r3JV2iyCoqBqcsRKMw/pkolFv+9VpjYI1gNQLlADKwmWYH6wPFSnKA3KODx3XnmtU1oOIUlFNWHlQECkMAFcrL3/9TI2ADYaWgfAU5dfkqc1fS+I0UT9YfjH5mlWq8KfuuA8Z15+vralA4NssgECPQgDDWj/oq8qN7nhWmfw7lFcsvDwRWC2sgKB+QrwhzeCmeLj9YI1BVABnYK+V1GRTi+KwB5EBZIJWgYqMwCuWV/3mpFlglLA2KPI8qepWCBIAWQIlbUw8rAiOQ4kj+YBoU1/UVlAeTANm6FcBQgQwX8nVPX3+pjQesFAPAV5JSQUIULSBGt6bPW+/SHmYV9p2PX6wEVgqrESjVa4uZ3iI9uHEOyAJzAPxDIjwmnlk5zL0gByr/GhcXEljrtcVcb5FumZCA0EljhP0gCAOnGjn26mf6YF9et6VNYvyYuXrelbNdkEGAiq7ecmJh8cNt+6TCqMPAfNM33dKYfuvT50uB9cFKQZV1O/OGE0AL6v64BRAfA4DJnO84s1ewBKsrbSHhlAbFOapKUQgpKBeU6eYJCZQBIwr1gUw302qQLpF/dvUOCRB3Ks1cBXLq/aMawnuX3SKRQg3Mfz3XN94Wyms/f7YPWA7W/w3UT/RoVH/1WKmsqB/GLRBRR7y8ekir8fsTEhR0XLtPQaUHjeUFr5tE/sl3d0qCuON7Vt7UA3nF8rx+7bsX3y6VBWYBOVCAGHATkLu+OJIDlsKiX9sD+UHT73pliiKrqH5zzxTFoDifleUn81wCPihWKsKk7qjWyFX7fKlUnCrBB2auUpwm8v9etUsDK+96rKRAXvXR7zWEtzbdKZGCjqeoHDDESE6vPJkC07AGglqDBMi7euRdvSagquNAOSgLFtcyI1+d3iQJI6uwyI4umYlzXrronTf0wf6940ZJNGYUlpq3jQ36CgfSGfmbF/5UIrGH8RUMdFMwj+ZKAgXyhjMzuq7QoKqSufOoMlC+mWcBcgnOWI9iRXHXKxp5Bs54n7t6/AGwUm3uIhTarBUGcvzVz/WbPb3rMqko6phY4L7dKJNP5B9M7ZMEkVFYiZkjCtn6VOq6/5i8qwaYBifbvcMHBf1qQgJAp2+ESRM5zYmZ1du0Au/f+BtAcU86E+ZBVIMqNXWaE3O27g+8ugjWM2z7x3Bp/KuzbbF46tQX12/rKuQRxiirNJFTKC8/YRI5GzkDK3Y9Tzmpkf/9/EP2SvrKCgAgBIUiEWtxy1zDx22bbpDI6ZDX0v2ud7agqLpknvlXmsjpJtP5fHNWGC9tXFnVoE5es61LEOvAWexi2aznEjoncmPk/7z4x8bD0hiRv2rsYbu//K1+7V8mHpCEpksSCSAIAZVIhArbe+HhxczgD3tt2k/m/mxmEzndbdVoRpsl8EH5a5ZqU8/WMBxc/2gCJhs5ojFn1KBWLKjtXYIol8yrRxc78+lE7oz8gO2SmRf5pq6UkNMrT+n38OexRyRB2CEI2NsSoQINSnuWv/yjR0qA5b0pTeR0l1ZYKwXV9Wa9/iHYrFuqn5fiqAG2Ov0tiRS3Jgqg7B4qN9sNAsYzn2/k+kp65p0DhoH8njXyY/FjEjHYH3ig+mDpK/mQdyXLTVyKZ8zBqAuTOnD6oMpHlAQULeik7xZ7uUSuZ7k0kVNrctJcve16e5AfXUxCN4u8MAGKFhSGeoQp5isGw3VdImcjN8B0MyjpfoE2cj7bMXhi6154aNkXU/m4c59VWP+s5xQi3Y5cgxo06/V6bTHfW6xK5M6D+GAukZ9sbe+iGEsXd0UzX1OhviJTy68s+ok8b+b9ifyv5927ABDu8YGxiTNYgAAUiSM3rT16rw/J/bl6kHZGnu2pss2oXcMA4vGmoNIRxiZyM7rYrmaCpZ3VQom94DiKbMNZDkpoUK7uu5fcLpU151LlYCCVCo+DYO/LTN6AYgym6wVKpB5VBFa/omEj59msCKx8CC56UgJWUcVfqhM5D7NuO4DGlN0QnK5X0o1mFijVWpgIzINy9d/afECiMgHTfZcFzcyrGFoAxsxFEmA1qFLPKh7MGnk5sLo1C28P5nvpJ1+se3Z6kwaWzXyF1a/dRxXXLFWgXH2TyF37L+9+zuT9eBBg3N4LD1S+30awtJH/3AyzNd3M/W+MmfUGgHIHyyfy+o0m76P4QFPL87UHyhK5AdavLBM0kQQv/PTVCxuAagxLAzvohdG6obghKAfs5LU7JLLCala/BlTUCJSrmyXy1ORTE0cKeObjUSoJMRqoqIEGX9YN6EANMB62edaruXplNfm5T3bu1MDS9p/zquFBud/DiRz0lbQxAXiLapM5igQxau8bcPUGRoeqQ2mF3VFyJd36ZgRQ7nf979u7jML6QIVDKar43v1EzltWbeZaUTzC1HvUUN2wChr9yAPm1jfnAMr9Hl6tmHWJXqMkisL2jgYeVffh8t9xIgfeW9kRBikcSlEjXUP/TekduYL9es+1DqBcbd6R86ihKFgXUK7u0XBGIor9o4IayuBLPezmDVvFH87kRoJBn3KTv/9w8/6tUx/PrXvdshGmyftxr/kannA6DfgyXbIAAAAASUVORK5CYII="},99:function(e){e.exports=JSON.parse('{"authentication":{"title-sign-in":"Registrarse","title-sign-up":"Reg\xedstrate","login-label":"Iniciar sesi\xf3n","register-label":"Registrarse","submit-label":"Enviar","header-left":"Historias de usuarios","user-stories-description":"Comparta con nosotros c\xf3mo usa nuestros productos, se relaciona con las historias de otros usuarios, vote por ellos y nos aseguraremos de brindar soluciones coherentes que mejoren su experiencia.","footer-left":"Este sitio guarda cierta informaci\xf3n en cookies pero solo cuando es estrictamente necesario","username-label":"Ingrese su nombre de usuario","email-label":"Introduce tu correo electr\xf3nico","password-label":"Ingresa tu contrase\xf1a","confirm-password-label":"Confirmar contrase\xf1a","forgot-password":"\xbfSe te olvid\xf3 tu contrase\xf1a?","reset-password":"Configura tu nueva contrase\xf1a","old-password":"Ingrese su contrase\xf1a anterior","new-password":"Nueva contrase\xf1a","confirm-password":"Confirmar contrase\xf1a","create-account":"Crea una cuenta","footer-right":"2020 EOS","existing-user":"\xbfUsuario existente?","reset-password-done":"Ll\xe9vame a la p\xe1gina de inicio de sesi\xf3n","success":"\xc9xito"}}')}},[[104,1,2]]]);
//# sourceMappingURL=main.8a73982a.chunk.js.map